# Role
Senior UI/UX Engineer specialized in Tiptap and Cursor-like interactions.

# Goal
Refactor the AI assistant from a "Modal Comparison" to a "Cursor-like Inline Diff" experience.

# Requirements

## 1. Inline Streaming Logic (The "Cursor" Way)
- **Delete Modal:** Completely remove the `AIDialog` or `Modal` component.
- **Selection Handling:** When AI starts, don't open a window. Instead:
  - Keep the original text visible but styled as "Deleted" (e.g., `bg-red-50 text-red-700 line-through dark:bg-red-900/20`).
  - Stream the AI response directly below or replacing it, styled as "Inserted" (e.g., `bg-green-50 text-green-700 dark:bg-green-900/20`).
- **Tiptap Decorations:** Use `EditorView` decorations to highlight the "Pending" AI changes without committing them to the final document state until "Accepted".

## 2. Floating Action Bar (The "Review" Bar)
- Instead of a modal, show a small, sleek **Floating Toolbar** anchored to the bottom of the modified area.
- **Buttons:**
  - `Accept` (Shortcuts: Cmd+Enter) - Removes diff styling and keeps AI text.
  - `Discard` (Shortcuts: Esc) - Reverts to the original text.
  - `Retry` - Re-runs the AI stream.
- **Style:** Pure Linear style. `bg-white dark:bg-black`, `border border-gray-200 dark:border-gray-800`, `rounded-full`, `px-4 py-1`, `shadow-lg`, `flex items-center gap-4`.

## 3. Implementation Details
- **Transaction Management:** Use Tiptap transactions to insert the AI content.
- **State Management:** Track `isGenerating`, `originalRange`, and `generatedText` within the Editor component.
- **Streaming Buffering:** Ensure that as the AI streams, the "Review Bar" follows the end of the text so it's always visible.

## 4. Visual Polish (Linear Aesthetic)
- **Animation:** The green background should "fade in" as the text streams.
- **Cursor:** While AI is typing, show a "ghost cursor" or a shimmering indigo line at the end of the AI stream.
- **Monochrome:** Minimize use of colors. Use subtle `emerald` and `rose` tints for diffs.

# Deliverables
1. Updated `Editor.tsx` with Inline Diff logic.
2. The `AIReviewToolbar.tsx` component that anchors to the editor selection.
3. Updated `useAIStream` to work with this inline-first approach.

# Key Instruction
The AI must feel like it's "invading" the document directly, not appearing in a separate UI layer.