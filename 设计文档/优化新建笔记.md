# Role
React & Dexie.js Logic Expert.

# Issue
1. **Selection Bug:** When the user clicks "New Note" (+), the note is created in the DB, but the UI remains on the "Empty State" screen. It does not automatically select the new note.
2. **UX Friction:** Even if it selected the note, it would default to "Read Mode". For a brand new note, it should default to "Edit Mode".

# Goal
Refactor the `createNewNote` function in `App.tsx` and the `Editor.tsx` state logic to ensure a smooth "Create -> Redirect -> Edit" flow.

# Requirements

## 1. Fix `App.tsx` (Create & Redirect)
- Modify the `handleCreateNote` function.
- **Capture ID:** `const newId = await db.notes.add({ ... })`.
- **Update State:** Immediately call `setActiveNoteId(newId)`.
- **Validation:** Ensure the type of `newId` matches `activeNoteId` (usually `number` for Dexie auto-increment).

## 2. Fix `Editor.tsx` (Auto-Edit for New Notes)
- We previously added a `useEffect` that sets `isEditing(false)` when `noteId` changes. We need to refine this.
- **Logic Update:**
  - Inside the `useEffect` that listens to `noteId`:
  - Check if the note is "Empty" (e.g., `content === ''` AND `title === '无标题'`).
  - **IF** it's a fresh empty note -> Set `isEditing(true)`.
  - **ELSE** (existing note) -> Set `isEditing(false)` (Read Mode).

# Deliverables
1. Provide the updated `handleCreateNote` function snippet for `App.tsx`.
2. Provide the updated `useEffect` snippet for `Editor.tsx`.

# Example Logic (Mental Model)
```javascript
// App.tsx
const createNote = async () => {
  const id = await db.notes.add({ title: '无标题', content: '', ... });
  setActiveNoteId(id); // <--- This fixes the screenshot issue
}

// Editor.tsx
useEffect(() => {
  if (content === '' && title === '无标题') {
    setIsEditing(true);
  } else {
    setIsEditing(false);
  }
}, [id]);