# Role
React & Dexie.js Architect.

# Context
The user wants to implement a **Tagging System**.
Current Stack: React, Tailwind, Tiptap, Dexie.js.

# Goal
1. Allow users to add/remove tags to a note in the Editor.
2. Display a list of all unique tags in the Sidebar.
3. Filter the Note List when a tag in the Sidebar is clicked.

# Requirements

## 1. Database Schema Update (`db.ts`)
- **Schema Change:** Update the `notes` table schema string.
- **MultiEntry Index:** Add `*tags` to the schema definition. (Note: The `*` prefix in Dexie means MultiEntry index, allowing efficient querying of array items).
- **Type Interface:** Update `Note` interface to include `tags: string[]`.

## 2. Editor UI: Tag Management
- **Component:** Create a `TagsInput` component in the Editor Header (below title, next to dates).
- **Interaction:**
  - Display existing tags as "Badges" (Gray-100 background, rounded-full, small text).
  - Include an "X" button on each badge to remove it.
  - An `<input>` field at the end:
    - On `Enter` key: Add the text as a new tag and clear input.
    - On `Backspace` (if input empty): Remove the last tag.
- **Sync:** Update the database immediately when tags change.

## 3. Sidebar UI: Tag List
- **Dynamic Fetching:** Query the DB to find all unique tags currently in use.
  - *Hint:* Use `db.notes.orderBy('tags').uniqueKeys()` if possible, or iterate.
- **Display:** Render the tags under a "Tags" section in the Sidebar.
- **Selection:** When a tag is clicked, update `currentView` to `tag-${tagName}` or similar.

## 4. App.tsx: Filtering Logic
- Update the `useLiveQuery` logic.
- **Condition:** If `currentView` starts with `tag-`, filter notes where `note.tags` includes the selected tag.
  - Example: `db.notes.where('tags').equals(selectedTag).toArray()`

# Deliverables
1. Updated `db.ts` file.
2. The `TagsInput` component code.
3. Updated `Sidebar.tsx` (or Sidebar section in App) logic to render dynamic tags.
4. Updated filtering logic in `App.tsx`.

# Visual Style (Linear)
- Tags should look like "Pills": `px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-md border border-gray-200`.
- Hover state: `hover:bg-gray-200 cursor-pointer`.