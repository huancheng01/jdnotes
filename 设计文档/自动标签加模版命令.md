# Role
Senior Product Engineer (AI & UX).

# Context
Our note app "JD Notes" has a great inline AI. Now we want to automate the boring parts: Titling and Structured Content Creation.

# Goal
Implement two major AI enhancements:
1. **Auto-Title**: Automatically rename "Untitled" notes based on content.
2. **AI Slash Menu**: A popover menu triggered by "/" to insert AI-generated structures.

# Requirements

## 1. Auto-Title Logic
- **Trigger**: When the editor loses focus (`onBlur`) AND the title is "æ— æ ‡é¢˜" (or empty) AND content length > 50 chars.
- **Action**: 
  - Send the first 200 characters to AI.
  - Prompt: "Give this note a concise, 5-10 word title in the same language as the text. Return ONLY the title."
  - Update the `notes` table in Dexie and the UI state.
- **UX**: Show a subtle "AI æ­£åœ¨ç”Ÿæˆæ ‡é¢˜..." æç¤ºåœ¨æ ‡é¢˜æ ï¼Œå®Œæˆåå¹³æ»‘æ›¿æ¢ã€‚

## 2. AI Slash Menu (Tiptap Extension)
- **Library**: Use `@tiptap/extension-suggestion` or a custom implementation triggered by `/`.
- **UI**: A small dropdown at the cursor position.
- **Items**:
  - `âœ¨ AI ç»­å†™`: Continue from the current line.
  - `ğŸ“… ä¼šè®®çºªè¦`: Insert a structured meeting template.
  - `ğŸ’¡ è„‘æš´å¤§çº²`: Generate a 5-point outline for the current topic.
  - `ğŸ› ï¸ ä»£ç å®ç°`: Ask AI to write code based on the previous paragraph.
- **Logic**: When an item is selected, trigger the `useAIStream` logic we built, but with specific system prompts for each template.

## 3. Persistent AI Config (Optimization)
- Add an "AI Prompt Library" in the Settings.
- Allow users to customize the system prompts for "Refine", "Summarize", etc.

# Deliverables
1. Logic for `Auto-Title` in `Editor.tsx`.
2. A new `SlashCommand` Tiptap extension or component.
3. Updated AI System Prompts for structured generation.

# Visual Style
The Slash Menu should be `dark:bg-[#16181D]`, `border-gray-200`, very compact, with icons for each command.