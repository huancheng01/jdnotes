# Role
Expert React Developer specializing in Rich Text Editors and CodeMirror.

# Context
We are building a note-taking app with Tiptap.
The user is unsatisfied with `lowlight/highlight.js` because the syntax highlighting is too weak (variables are white).
We need to replace the Tiptap Code Block Node View with an embedded **CodeMirror 6** instance.

# Goal
Create a new `CodeBlockComponent` that uses `@uiw/react-codemirror` to provide a VS Code-like editing experience inside the Tiptap editor.

# Tech Stack
- `@uiw/react-codemirror` (The wrapper)
- `@codemirror/lang-python`, `@codemirror/lang-javascript`, etc. (Language packs)
- `@uiw/codemirror-theme-tokyo-night` (Or similar high-quality dark theme)

# Requirements

## 1. The Component Structure
- Create a `CodeBlockComponent.tsx` wrapped in Tiptap's `NodeViewWrapper`.
- Inside, render the `<CodeMirror />` component.
- **Bi-directional Sync**:
  - `value`: Bind to `node.attrs.content` (or equivalent text content from the node).
  - `onChange`: Update the Tiptap node's content using `updateAttributes` or a transaction.

## 2. Visual Style (VS Code Clone)
- **Theme**: Use `tokyo-night` or `dracula` to ensure variables have colors (not just white).
- **UI**:
  - Show Line Numbers (`lineNumbers: true`).
  - Font: 'JetBrains Mono' or 'Fira Code' (Monospace).
  - Background: Match the theme strictly (e.g., Deep Blue/Black).
  - Border/Radius: `rounded-lg overflow-hidden my-4`.

## 3. Language Selector Logic
- Keep the custom Toolbar we designed earlier (Language Select + Copy Button).
- **Dynamic Extensions**: The `extensions` prop of CodeMirror must dynamically load the correct language support (Python, JS, HTML) based on the user's selection in the dropdown.

## 4. Integration Details
- **Stop Propagation**: Ensure typing in CodeMirror doesn't trigger Tiptap shortcuts. (The library usually handles this, but verify `contentEditable={false}` on the wrapper might be needed while CodeMirror handles the input).

# Deliverables
1. `npm install` commands for `@uiw/react-codemirror` and necessary language/theme packages.
2. The complete `CodeBlockComponent.tsx` code.
3. Instructions on how to register this in `Editor.tsx` (replacing the old lowlight extension with a standard `CodeBlock` extension that uses this Node View).